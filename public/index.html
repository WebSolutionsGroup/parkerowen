<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Parker Owen | Baseball Prospect</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-FT6LLWLZ43"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-FT6LLWLZ43');
    </script>
</head>
<body>
    <!-- Hero Section -->
    <header class="hero">
        <video autoplay muted loop playsinline class="hero-video">
            <source src="ParkerOwen.mp4" type="video/mp4">
            Your browser does not support the video tag.
        </video>
        <div class="hero-content">
            <h1>PARKER OWEN</h1>
            <p>Baseball Prospect | Strake Jesuit College Preparatory - Class of 2027 | Shortstop / Utility / Pitcher </p>
            <a href="#highlights" class="cta-button">Watch Highlights</a>
        </div>
    </header>

    <!-- Stats Bar -->
    <section class="stats">
        <div class="stat-item"><span>108</span> PA</div>
        <div class="stat-item"><span>84</span> AB</div>
        <div class="stat-item"><span>0.388</span> BA</div>
        <div class="stat-item"><span>0.519</span> OBP</div>
        <div class="stat-item"><span>0.971</span> OPS</div>
        <div class="stat-item"><span>35</span> H</div>
        <div class="stat-item"><span>3</span> SO</div>
    </section>

    <!-- About Section -->
    <section class="about">
        <img src="player.jpg" alt="Parker Owen" class="about-img">
        <div class="about-text">
            <h2>About Me</h2>
            <p>5’10”, 145 lbs | Shortstop / Utility / Pitcher from Pearland, TX.</p>
            <p>Parker Owen, a sophomore standout, showcases advanced offensive tools early in his high school career. Posting a .388 batting average across 84 at-bats, he demonstrates consistent contact ability, amassing 35 hits. His .519 on-base percentage reflects strong plate discipline, bolstered by an exceptional 3 strikeouts in 108 plate appearances—a rare mark of bat control for his age. An OPS of .971 hints at emerging power potential, suggesting extra-base capability. While still developing, Parker’s current production and approach signal a high ceiling worthy of attention from college and pro scouts.</p>
        </div>
    </section>

    <!-- Academics Section -->
    <section class="academics">
        <div class="academics-text">
            <h2>Academics</h2>
            <p>HONOR ROLL FALL 2023/SPRING 2024/FALL 2024</p>
            <p>AP STUDENT</p>
            <p>FOREIGN LANGUAGE - MANDARIN</p>
        </div>
    </section>

    <!-- Extracurriculars Section -->
    <section class="extracurriculars">
        <div class="extracurriculars-text">
            <h2>Extracurriculars</h2>
            <img src="camplonghorn.png" alt="Camp Longhorn" class="extracurriculars-img">
            <p>9 YEAR CAMP LONGHORN ATTENDEE AND FUTURE COUNSELOR</p>
            <img src="ymsl.png" alt="Young Men's Service League" class="extracurriculars-img">
            <p>MEMBER OF THE YOUNG MEN'S SERVICE LEAGUE</p>
        </div>
    </section>

    <!-- Highlights Section -->
    <section id="highlights" class="highlights">
        <h2>See Me in Action</h2>
        <iframe width="560" height="315" src="https://www.youtube.com/embed/N5Caxw2rYuE?si=fvmHE0M23Lx5Cixx" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <p>Contact: <a href="mailto:williamparkerowen@gmail.com">williamparkerowen@gmail.com</a></p>
            <div class="social-links">
                <a href="https://x.com/SP_Bsball" target="_blank" rel="noopener noreferrer" title="X">
                    <i class="fab fa-x-twitter"></i>
                </a>
                <a href="https://instagram.com/Parkerbsbl27" target="_blank" rel="noopener noreferrer" title="Instagram">
                    <i class="fab fa-instagram"></i>
                </a>
                <a href="https://tiktok.com/@parkerowen27" target="_blank" rel="noopener noreferrer" title="TikTok">
                    <i class="fab fa-tiktok"></i>
                </a>
            </div>
            <p class="created-by">Created by <a href="https://websolutionsgroup.com" target="_blank" rel="noopener noreferrer">Web Solutions Group, LLC</a></p>
        </div>
    </footer>
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.5.0/firebase-app.js";
        import { getAnalytics, logEvent } from "https://www.gstatic.com/firebasejs/11.5.0/firebase-analytics.js";
        import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/11.5.0/firebase-firestore.js";
      
        const firebaseConfig = {
          apiKey: "AIzaSyA23poM6Vx5Aegbrs8Rclm64aPQmhGT7ic",
          authDomain: "parkerowen-5190a.firebaseapp.com",
          projectId: "parkerowen-5190a",
          storageBucket: "parkerowen-5190a.firebasestorage.app",
          messagingSenderId: "150594269406",
          appId: "1:150594269406:web:97c280ad904574937b524f",
          measurementId: "G-FT6LLWLZ43"
        };
      
        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);
        const db = getFirestore(app);
      
        document.addEventListener('DOMContentLoaded', async () => {
          const urlParams = new URLSearchParams(window.location.search);
          const referrer = urlParams.get('ref') || 'direct';
          const step = urlParams.get('step') || 'direct';
          const pageLocation = window.location.href;
          const startTime = new Date();
      
          // Default location values in case geolocation fails or is denied
          let location = { latitude: 'N/A', longitude: 'N/A', locationDenied: false };
      
          // Function to get user location with fallback
          const getUserLocation = () => {
            return new Promise((resolve) => {
              if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(
                  (position) => resolve({
                    latitude: position.coords.latitude,
                    longitude: position.coords.longitude,
                    locationDenied: false
                  }),
                  (error) => {
                    console.warn('Geolocation failed:', error.message);
                    resolve({
                      latitude: 'N/A',
                      longitude: 'N/A',
                      locationDenied: true // Flag to indicate denial or error
                    });
                  },
                  { timeout: 5000 } // Timeout after 5 seconds to avoid hanging
                );
              } else {
                console.warn('Geolocation not supported by browser');
                resolve({
                  latitude: 'N/A',
                  longitude: 'N/A',
                  locationDenied: true
                });
              }
            });
          };
      
          // Attempt to get location, but don’t block logging if it fails
          try {
            location = await getUserLocation();
          } catch (error) {
            console.error('Error fetching location:', error);
            location = { latitude: 'N/A', longitude: 'N/A', locationDenied: true };
          }
      
          // Log initial page visit to Analytics (always, even without location)
          logEvent(analytics, 'page_visit', {
            referrer_id: referrer,
            step_id: step,
            page_location: pageLocation,
            latitude: String(location.latitude),
            longitude: String(location.longitude),
            location_denied: location.locationDenied,
            timestamp: startTime.toISOString()
          });
      
          // Log to Firestore on page unload (resilient to errors)
          window.addEventListener('beforeunload', async () => {
            const endTime = new Date();
            const timeSpent = Math.round((endTime - startTime) / 1000); // Seconds
      
            // Core data to log, even if other parts fail
            const visitData = {
              referrer,
              step,
              pageLocation,
              startTime: startTime.toISOString(),
              endTime: endTime.toISOString(),
              timeSpent,
              latitude: location.latitude,
              longitude: location.longitude,
              locationDenied: location.locationDenied,
              userAgent: navigator.userAgent
            };
      
            try {
              await addDoc(collection(db, 'visits'), visitData);
            } catch (error) {
              console.error('Error logging to Firestore:', error);
              // Optionally log a minimal version to Analytics as a fallback
              logEvent(analytics, 'visit_log_failure', {
                referrer_id: referrer,
                page_location: pageLocation,
                error_message: error.message
              });
            }
      
            // Log session end to Analytics (always, even if Firestore fails)
            logEvent(analytics, 'session_end', {
              referrer_id: referrer,
              time_spent: timeSpent,
              page_location: pageLocation,
              location_denied: location.locationDenied
            });
          });
        });
      </script>
</body>
</html>